<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EatCo Challenge Tracker</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f0fff4, #d7fbe8);
      margin: 0;
      padding: 0;
      color: #333;
      text-align: center;
    }

    h1 {
      margin-top: 2rem;
      color: #2e8b57;
      font-size: 2rem;
      font-weight: 700;
    }

    .challenge-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.2rem;
      padding: 2rem;
      max-width: 1000px;
      margin: 0 auto;
    }

    .challenge-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      padding: 1.2rem;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .challenge-card:hover {
      transform: scale(1.03);
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
    }

    .challenge-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #166534;
    }

    .challenge-desc {
      font-size: 0.95rem;
      margin: 0.6rem 0;
      color: #333;
    }

    .challenge-check {
      transform: scale(1.4);
      cursor: pointer;
      margin-top: 8px;
      accent-color: #2e8b57;
    }

    /* Progress bar */
    #progressWrap {
      width: 90%;
      max-width: 800px;
      margin: 1.5rem auto;
      text-align: center;
    }

    #progressText {
      margin-bottom: 8px;
      font-weight: 600;
    }

    #progressOuter {
      background: #eee;
      border-radius: 10px;
      overflow: hidden;
      height: 16px;
    }

    #progressBar {
      height: 16px;
      width: 0%;
      background: linear-gradient(90deg,#6ee7b7,#2e8b57);
      transition: width 0.4s ease;
    }
  </style>
</head>
<body>
  <h1>üå± EatCo Challenge Tracker</h1>

  <div class="challenge-container">
    <div class="challenge-card">
      <div class="challenge-title">Week 1: Zero-Waste Snack Swap üçé</div>
      <div class="challenge-desc">
        Ditch the plastic wrappers this week! Try carrying homemade snacks or fruits. 
        Fun fact: plastic can take up to <b>500 years</b> to decompose ‚Äî your apple core decomposes in 2 weeks!
      </div>
      <input type="checkbox" class="challenge-check" />
    </div>

    <div class="challenge-card">
      <div class="challenge-title">Week 2: Meatless Monday üåø</div>
      <div class="challenge-desc">
        Go plant-powered for one day! Skipping meat for just a day saves over <b>1,500 liters of water</b> ‚Äî 
        that‚Äôs about 10 bathtubs of water. Science says: plants emit way less CO‚ÇÇ!
      </div>
      <input type="checkbox" class="challenge-check" />
    </div>

    <div class="challenge-card">
      <div class="challenge-title">Week 3: Cold Water Wash üíß</div>
      <div class="challenge-desc">
        Wash your clothes in cold water to save energy! Heating water uses a ton of electricity ‚Äî 
        science says it can reduce your laundry‚Äôs carbon footprint by <b>90%</b> üò±.
      </div>
      <input type="checkbox" class="challenge-check" />
    </div>

    <div class="challenge-card">
      <div class="challenge-title">Week 4: BYO Cup ‚òï</div>
      <div class="challenge-desc">
        Bring your own reusable cup or bottle! Each reusable cup can replace <b>365 disposables</b> a year. 
        Bonus: hot drinks stay hotter longer thanks to thermodynamics üî•.
      </div>
      <input type="checkbox" class="challenge-check" />
    </div>

    <div class="challenge-card">
      <div class="challenge-title">Week 5: Compost Crew üåç</div>
      <div class="challenge-desc">
        Start a mini compost! Microbes in compost turn food waste into soil food ‚Äî 
        a living science experiment that cuts methane emissions by <b>50%</b>!
      </div>
      <input type="checkbox" class="challenge-check" />
    </div>

    <div class="challenge-card">
      <div class="challenge-title">Week 6: Lights Out üîã</div>
      <div class="challenge-desc">
        Turn off lights for an hour daily ‚Äî your eyes rest and your planet thanks you. 
        LEDs save up to <b>85%</b> energy compared to bulbs from your parents‚Äô era.
      </div>
      <input type="checkbox" class="challenge-check" />
    </div>
  </div>

  <!-- Progress section -->
  <div id="progressWrap">
    <div id="progressText">Progress: 0%</div>
    <div id="progressOuter">
      <div id="progressBar"></div>
    </div>
  </div>

  <!-- Confetti + Script -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    const checkboxes = Array.from(document.querySelectorAll('.challenge-check'));
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');

    // load saved state
    const saved = JSON.parse(localStorage.getItem('eatco_checks') || '[]');
    if (saved.length && checkboxes.length) {
      checkboxes.forEach((cb, i) => {
        if (saved[i]) cb.checked = true;
      });
    }

    function updateProgress() {
      const total = checkboxes.length || 1;
      const checkedCount = checkboxes.filter(cb => cb.checked).length;
      const percent = Math.round((checkedCount / total) * 100);

      progressBar.style.width = percent + '%';
      progressText.textContent = 'Progress: ' + percent + '%';

      const state = checkboxes.map(cb => cb.checked);
      localStorage.setItem('eatco_checks', JSON.stringify(state));

      const alreadyCelebrated = localStorage.getItem('eatco_celebrated') === '1';
      if (percent === 100 && !alreadyCelebrated) {
        launchConfetti();
        localStorage.setItem('eatco_celebrated', '1');
      }
    }

    function launchConfetti() {
      const duration = 2000;
      const end = Date.now() + duration;

      (function frame() {
        confetti({
          particleCount: 60,
          spread: 70,
          origin: { y: 0.6 },
          colors: ['#6ee7b7','#2e8b57','#1abc9c','#16a085']
        });
        if (Date.now() < end) requestAnimationFrame(frame);
      })();
    }

    checkboxes.forEach(cb => cb.addEventListener('change', updateProgress));
    updateProgress();
  </script>
</body>
</html>
