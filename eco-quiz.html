import React, { useState } from "react";

export default function EcoPersonalityQuiz() {
  const [step, setStep] = useState(0);
  const [answers, setAnswers] = useState([]);
  const [result, setResult] = useState(null);

  const questions = [
    {
      q: "What's your vibe on a chill day?",
      options: ["Reading in nature", "Cleaning + organizing", "Biking/Walking", "Gaming or Netflix"],
    },
    {
      q: "Pick a snack:",
      options: ["Fruit bowl", "Protein bar", "Chips", "Smoothie"],
    },
    {
      q: "Your ideal weekend plan:",
      options: ["Beach cleanup", "DIY craft", "Sports", "Hanging out with friends"],
    },
    {
      q: "Which superpower would you pick?",
      options: ["Control plants", "Time freeze", "Super speed", "Teleportation"],
    },
    {
      q: "Your study style is:",
      options: ["Calm & focused", "Aesthetic notes", "Last-minute sprint", "Group studies"],
    },
    {
      q: "Choose a color scheme:",
      options: ["Earthy tones", "Pastels", "Neon", "Black & white"],
    },
    {
      q: "Pick a dream eco-gadget:",
      options: ["Self-watering plant pots", "Smart recycling bin", "Solar-powered bike", "Plastic-eating robot"],
    },
    {
      q: "What do you hate most?",
      options: ["Littering", "Wasting food", "Wasting electricity", "Noise pollution"],
    },
    {
      q: "Your aesthetic:",
      options: ["Cottagecore", "Minimalist", "Sporty", "Gamer"],
    },
    {
      q: "Pick an eco-challenge:",
      options: ["7-day no plastic", "Trash jar challenge", "Walk 10,000 steps", "Upcycle challenge"],
    },
  ];

  const results = [
    {
      title: "üåø The Nature Guardian",
      desc: "Calm, grounded, and peaceful ‚Äî you‚Äôre always rooting for the planet (literally).",
    },
    {
      title: "‚ôªÔ∏è The Zero-Waste Genius",
      desc: "You love organizing and making the world cleaner, one smart choice at a time.",
    },
    {
      title: "‚ö° The Eco Athlete",
      desc: "Active, energetic, always moving ‚Äî sustainability is a lifestyle for you!",
    },
    {
      title: "ü§ñ The Future Innovator",
      desc: "Tech + planet = your perfect combo. You're basically the future of Earth.",
    },
  ];

  const handleAnswer = (optionIndex) => {
    const nextAnswers = [...answers, optionIndex];
    setAnswers(nextAnswers);

    if (step + 1 < questions.length) {
      setStep(step + 1);
    } else {
      const sum = nextAnswers.reduce((a, b) => a + b, 0);
      const resultIndex = sum % results.length;
      setResult(results[resultIndex]);
    }
  };

  return (
    <div className="w-full flex flex-col items-center p-6 max-w-xl mx-auto">
      <h1 className="text-3xl font-bold mb-4 text-center">Eco Personality Quiz üåç</h1>

      {!result ? (
        <div className="w-full p-6 rounded-2xl shadow-xl bg-white">
          <h2 className="text-xl font-semibold mb-4">{questions[step].q}</h2>
          <div className="grid gap-3">
            {questions[step].options.map((opt, i) => (
              <button
                key={i}
                onClick={() => handleAnswer(i)}
                className="p-3 rounded-xl shadow bg-green-100 hover:bg-green-200 transition"
              >
                {opt}
              </button>
            ))}
          </div>

          <p className="text-sm mt-4 text-gray-500 text-center">Question {step + 1}/10</p>
        </div>
      ) : (
        <div className="w-full p-6 rounded-2xl shadow-xl bg-white text-center">
          <h2 className="text-2xl font-bold mb-3">{result.title}</h2>
          <p className="text-gray-700 mb-4">{result.desc}</p>

          <button
            className="mt-4 px-4 py-2 rounded-xl bg-green-300 hover:bg-green-400"
            onClick={() => {
              setStep(0);
              setAnswers([]);
              setResult(null);
            }}
          >
            Restart Quiz
          </button>
        </div>
      )}
    </div>
  );
}
