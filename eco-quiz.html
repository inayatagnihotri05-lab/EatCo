import React, { useState } from "react";

// Personality result data
const resultsMap = {
  thinker: {
    title: "Eco Thinker ðŸŒ¿",
    desc: "Calm, mindful, and connected to nature. You make eco choices thoughtfully and inspire others quietly."
  },
  organizer: {
    title: "Green Queen/King ðŸ‘‘â™»ï¸",
    desc: "The master of order! Recycling bins fear you. You keep everything sorted and eco-efficient."
  },
  mover: {
    title: "Eco Ninja âš¡ðŸš´",
    desc: "Active, fast, and always on the go! You reduce carbon footprints without even trying."
  },
  gamer: {
    title: "Chill Recycler ðŸŽ®â™»ï¸",
    desc: "Low effort but high impact. You use tech smartly and save energy like a pro." 
  }
};

export default function EcoPersonalityQuiz() {
  const [step, setStep] = useState(0);
  const [scores, setScores] = useState({ thinker: 0, organizer: 0, mover: 0, gamer: 0 });
  const [result, setResult] = useState(null);

  const questions = [
    {
      q: "What's your vibe on a chill day?",
      options: ["Reading in nature", "Cleaning + organizing", "Biking/Walking", "Gaming or Netflix"]
    },
    {
      q: "What kind of eco task feels easiest to you?",
      options: [
        "Reusing jars + bottles",
        "Sorting waste nicely",
        "Carrying a reusable bottle everywhere",
        "Turning off lights + devices"
      ]
    },
    {
      q: "Which snack matches your energy?",
      options: ["Fruits or nuts", "Homemade sandwich", "Energy bar", "Chips or chocolate"]
    },
    {
      q: "Whatâ€™s your ideal school break?",
      options: ["Sitting under a tree", "Tidying your desk", "Playing sports", "Watching YouTube"]
    },
    {
      q: "Choose a dream home upgrade:",
      options: [
        "A big backyard garden",
        "A perfect recycling corner",
        "A solar-powered bike",
        "A smart home with auto energy saving"
      ]
    },
    {
      q: "Your go-to eco flex?",
      options: [
        "I upcycle everything",
        "My room is always clutter-free",
        "I walk/cycle the most",
        "I save electricity like a pro"
      ]
    },
    {
      q: "What annoys you the MOST?",
      options: [
        "People wasting paper",
        "Messy bins",
        "Cars honking",
        "Chargers left plugged in"
      ]
    },
    {
      q: "Pick a weekend plan:",
      options: ["Visit a park", "Clean your room", "Go for a run", "Chill with your phone"]
    },
    {
      q: "Whatâ€™s your dream superpower?",
      options: [
        "Talking to trees",
        "Organizing anything instantly",
        "Speed like The Flash",
        "Controlling electricity"
      ]
    },
    {
      q: "Which school project would you choose?",
      options: [
        "Plant a mini garden",
        "Make a recycling chart",
        "Walkathon awareness rally",
        "Energy-saving gadget prototype"
      ]
    }
  ];

  const handleSelect = (index) => {
    const keys = ["thinker", "organizer", "mover", "gamer"];
    const chosen = keys[index];

    setScores((prev) => ({ ...prev, [chosen]: prev[chosen] + 1 }));

    if (step + 1 === questions.length) {
      const final = Object.entries(scores).sort((a, b) => b[1] - a[1])[0][0];
      setResult(resultsMap[final]);
    }

    setStep(step + 1);
  };

  if (result) {
    return (
      <div className="p-4 max-w-xl mx-auto text-center">
        <h1 className="text-3xl font-bold mb-4">{result.title}</h1>
        <p className="text-lg">{result.desc}</p>
      </div>
    );
  }

  return (
    <div className="p-4 max-w-xl mx-auto">
      <h2 className="text-xl font-semibold mb-4">{questions[step].q}</h2>

      <div className="grid gap-3">
        {questions[step].options.map((opt, idx) => (
          <button
            key={idx}
            onClick={() => handleSelect(idx)}
            className="p-3 rounded-xl shadow bg-white hover:bg-gray-100"
          >
            {opt}
          </button>
        ))}
      </div>

      <p className="mt-4 text-gray-500">Question {step + 1} / {questions.length}</p>
    </div>
  );
}
