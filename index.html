<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EatCo ğŸŒ¿</title>
  <meta name="google-site-verification" content="google3752f23335fcb52d" />

  <link rel="stylesheet" href="style.css" />

  <meta name="description" content="EatCo â€“ Gen Z sustainability hub with eco games, challenges, and mini-courses.">
  <meta name="keywords" content="EatCo, sustainability, eco, gen z, eco games, zero waste challenges">
  <meta name="author" content="Inayat Agnihotri">

  <!-- OPEN GRAPH (For Instagram, WhatsApp, Facebook previews) -->
  <meta property="og:title" content="EatCo ğŸŒ¿ â€“ Gen Z Sustainability Hub">
  <meta property="og:description" content="Explore EcoRun, zero-waste challenges, sustainability blogs, and Gen Z eco action.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://inayatagnihotri05-lab.github.io/EatCo/">
  <meta property="og:image" content="https://inayatagnihotri05-lab.github.io/EatCo/assets/eatco-banner.png">

  <!-- TWITTER PREVIEW -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="EatCo ğŸŒ¿ â€“ Gen Z Sustainability Hub">
  <meta name="twitter:description" content="Eco games, sustainability challenges, and zero-waste learning for Gen Z.">
  <meta name="twitter:image" content="https://inayatagnihotri05-lab.github.io/EatCo/assets/eatco-banner.png">

  <!-- FAVICON -->
  <link rel="icon" type="image/png" href="assets/leaf.png" />

  <style>
    /* Recipe Card Styles */
    .recipes-section {
      margin: 50px auto;
      max-width: 1000px;
      padding: 0 20px;
    }
    .recipes-section h2 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2em;
      color: #2e8b57;
    }
    .recipe-card {
      background: #f0f9f4;
      border-left: 6px solid #2e8b57;
      margin: 15px 0;
      padding: 15px 20px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      border-radius: 8px;
    }
    .recipe-card:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .recipe-title {
      font-weight: bold;
      font-size: 1.3em;
      color: #276749;
    }
    .recipe-details {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.4s ease;
      font-size: 0.95em;
      color: #333;
      margin-top: 10px;
    }
    .recipe-details p {
      margin: 5px 0;
    }
    .recipe-tags {
      margin-top: 10px;
      font-size: 0.85em;
      color: #2e8b57;
    }
    .share-btn {
      margin-top: 10px;
      padding: 6px 12px;
      font-size: 0.9em;
      background: #2ecc71;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .recipe-card.active .recipe-details {
      max-height: 500px;
      padding-top: 10px;
    }
  </style>
  
</head>

<body>

  <!-- Navbar -->
  <nav>
    <h2 class="logo">EatCo ğŸŒ¿</h2>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="about.html">About Me</a></li>
      <li><a href="#mission">Mission</a></li>
      <li><a href="#join">Join</a></li>
      <li><a href="#footprint">Carbon Checker</a></li>
    </ul>
  </nav>

  <!-- ğŸ”¥ Scrolling Banner -->
  <div class="marquee">
    <div class="marquee-inner">
      â™»ï¸ Reduce Waste â€¢ ğŸŒ± Choose Reusable â€¢ ğŸš´ Move Greener â€¢ ğŸ’§ Save Water â€¢  
      ğŸŒ Eat Local â€¢ ğŸƒ Protect Nature â€¢ âœ¨ Small Steps Matter â€¢  
      â™»ï¸ Reduce Waste â€¢ ğŸŒ± Choose Reusable â€¢ ğŸš´ Move Greener â€¢ ğŸ’§ Save Water
    </div>
  </div>

  <!-- Hero Section -->
  <section id="home" class="hero fade-in">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1>Welcome to EatCo ğŸŒ±</h1>
      <p>Building a world where every bite counts â€” for you and the planet.</p>
      <a href="#join" class="btn">Join the Movement</a>
      <a href="newsletter.html" class="btn" style="margin-top: 15px; background:#2ecc71;">
        ğŸ“¨ EatCo Newsletter
      </a>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="fade-in">
    <h2>Mindful. Local. Sustainable.</h2>
    <p>EatCo promotes eco-friendly eating habits â€” reducing waste, supporting farmers, and making sustainability simple and delicious.</p>
    <a href="about.html" class="btn">About our founder</a>
  </section>

  <!-- Mission Section -->
  <section id="mission" class="fade-in">
    <h2>Our Mission</h2>
    <a href="mission.html" class="mission-btn">Read Our Full Mission â†’</a>
    <ul>
      <li>ğŸŒ¾ Sustainable Agriculture â€“ Supporting local, seasonal, and organic food systems.</li>
      <li>ğŸ´ Zero-Waste Eating â€“ Turning leftovers into art and reducing food waste.</li>
      <li>ğŸŒ Carbon Awareness â€“ Helping people track and reduce their food footprint.</li>
    </ul>
  </section>

  <!-- Join Section -->
  <section id="join" class="join-box fade-in">
    <h2>Join the Movement ğŸŒ</h2>
    <p>Be part of the eco-food revolution. Letâ€™s make every meal meaningful.</p>
    <div class="join-buttons">
      <a href="challenge.html" class="btn">ğŸš€ Zero Waste Challenge</a>
      <a href="eco-quiz.html" class="btn quiz-btn">Eco Personality Quiz</a>
      <a href="ecorun.html" class="btn">ğŸ® Play EcoRun</a>
      <a href="ecobuzz.html" class="btn">ğŸŒ¿ EcoBuzz</a>
      <a href="climate-myth-buster.html" class="btn myth-btn">ğŸ’¥ Climate Myth Buster</a>
    </div>
  </section>

 <!-- â­ Carbon Footprint Checker -->
<!-- ğŸŒ¿ Interactive CO2 Footprint Checker -->
<section class="co2-checker">
  <h2>ğŸŒ Quick COâ‚‚ Footprint Checker</h2>
  <p class="subtext">Select your habits and see your COâ‚‚ impact instantly!</p>

  <div class="quiz-box">
    <label>ğŸš¶ How do you usually travel?</label>
    <select id="travel" onchange="updateColor('travel')">
      <option value="1">ğŸš¶ Walking / ğŸš² Cycling</option>
      <option value="3">ğŸšŒ Bus / ğŸš‡ Metro</option>
      <option value="7">ğŸš— Car</option>
    </select>

    <label>ğŸ” Whatâ€™s your daily diet like?</label>
    <select id="diet" onchange="updateColor('diet')">
      <option value="2">ğŸ¥— Veg</option>
      <option value="3">ğŸ² Mixed</option>
      <option value="5">ğŸ¥© Non-Veg daily</option>
    </select>

    <label>ğŸ’¡ How much electricity do you use?</label>
    <select id="electric" onchange="updateColor('electric')">
      <option value="2">ğŸ”Œ Very low</option>
      <option value="4">ğŸ’¡ Medium</option>
      <option value="7">âš¡ High</option>
    </select>

    <label>ğŸš¿ How often do you take long showers?</label>
    <select id="water" onchange="updateColor('water')">
      <option value="1">ğŸ’§ Rarely / short</option>
      <option value="3">ğŸš¿ Sometimes</option>
      <option value="5">ğŸ› Daily / long</option>
    </select>

    <label>ğŸ›ï¸ How much single-use plastic do you use?</label>
    <select id="plastic" onchange="updateColor('plastic')">
      <option value="1">â™»ï¸ Almost none</option>
      <option value="3">ğŸ”¹ Sometimes</option>
      <option value="5">âš ï¸ Daily / high</option>
    </select>

    <label>âœˆï¸ Do you take flights often?</label>
    <select id="flights" onchange="updateColor('flights')">
      <option value="1">ğŸ›¬ Rarely / none</option>
      <option value="4">ğŸ›« 1-2 per year</option>
      <option value="7">ğŸŒ 3+ per year</option>
    </select>

    <button onclick="calcCO2()">Check My COâ‚‚</button>

    <div class="result" id="result"></div>
  </div>
</section>

<style>
  .co2-checker{
    padding:40px;
    background:#e6ffe6;
    border-radius:20px;
    margin:40px auto;
    max-width:600px;
    font-family:Arial;
  }

  .co2-checker h2{
    text-align:center;
    font-size:28px;
  }

  .subtext{
    text-align:center;
    margin-bottom:20px;
    font-size:16px;
    color:#333;
  }

  .quiz-box{
    display:flex;
    flex-direction:column;
    gap:15px;
  }

  label{
    font-weight:bold;
  }

  select, button{
    padding:10px;
    border-radius:10px;
    border:1px solid #aaa;
    font-size:16px;
  }

  button{
    background:#2e8b57;
    color:white;
    cursor:pointer;
    font-size:16px;
  }

  .result{
    margin-top:20px;
    padding:15px;
    border-radius:10px;
    font-size:18px;
    font-weight:bold;
    display:none;
    text-align:center;
  }

  /* Dynamic select colors */
  select.green{background:#d4f7d4;}
  select.yellow{background:#fff3b3;}
  select.red{background:#f7d4d4;}
</style>

<script>
  // Update select background color based on value
  function updateColor(id){
    let val = Number(document.getElementById(id).value);
    let sel = document.getElementById(id);
    if(val <= 2) sel.className = 'green';
    else if(val <=4) sel.className = 'yellow';
    else sel.className = 'red';
  }

  // Calculate CO2 score
  function calcCO2(){
    let travel = Number(document.getElementById("travel").value);
    let diet = Number(document.getElementById("diet").value);
    let electric = Number(document.getElementById("electric").value);
    let water = Number(document.getElementById("water").value);
    let plastic = Number(document.getElementById("plastic").value);
    let flights = Number(document.getElementById("flights").value);

    let total = travel + diet + electric + water + plastic + flights;

    let msg = "";
    let color = "";

    if(total <= 10){
      msg = "ğŸŒ± Excellent! Your COâ‚‚ footprint is very low!";
      color = "#d4f7d4";
    } 
    else if(total <= 20){
      msg = "âœ¨ Good! Small improvements can make a difference.";
      color = "#fff3b3";
    }
    else {
      msg = "ğŸ”¥ High COâ‚‚! Try reducing car use, flights, or single-use items.";
      color = "#f7d4d4";
    }

    let resultDiv = document.getElementById("result");
    resultDiv.style.display = "block";
    resultDiv.style.background = color;
    resultDiv.innerHTML = "Your COâ‚‚ Score: <strong>" + total + "</strong><br>" + msg;
  }

  // Initialize colors on load
  ['travel','diet','electric','water','plastic','flights'].forEach(id=>updateColor(id));
</script>



  <!-- ğŸŒ± Eco Recipes Section -->
 <!-- ğŸŒ± Eco Recipes Section -->
<section id="recipes" class="recipes-section fade-in">

  <!-- ğŸ‘‰ CLICK BUBBLE (Added cleanly) -->
  <div style="
    background:#2ecc71;
    color:white;
    padding:10px 16px;
    width: fit-content;
    margin: 10px auto 0 auto;
    border-radius:20px;
    font-weight:600;
    box-shadow:0 3px 8px rgba(0,0,0,0.15);
  ">
    ğŸ‘‰ Click the recipes below!
  </div>

  <h2>ğŸŒ¿ Quick & Eco-Friendly Recipes</h2>

  <!-- Recipe 1 -->
  <div class="recipe-card">
    <div class="recipe-title">Vegan Chocolate Mug Cake ğŸ«</div>
    <div class="recipe-details">
      <p><b>Ingredients:</b> 4 tbsp flour, 2 tbsp cocoa, 1 tbsp sugar, 3 tbsp almond milk, 1 tsp oil</p>
      <p><b>Instructions:</b> Mix all ingredients in a mug. Microwave for 90 seconds.</p>
      <p><b>Eco Tip:</b> Choose fair-trade cocoa to lower carbon cost.</p>

      <p class="recipe-tags">ğŸ”¥ 320 Calories â€¢ ğŸŒ 0.4 kg COâ‚‚</p>
      <button class="share-btn" onclick="shareRecipe('Vegan Chocolate Mug Cake ğŸ«')">ğŸ“¤ Share</button>
    </div>
  </div>

  <!-- Recipe 2 -->
  <div class="recipe-card">
    <div class="recipe-title">Chickpea & Veggie Stir Fry ğŸ¥•</div>
    <div class="recipe-details">
      <p><b>Ingredients:</b> 1 cup chickpeas, veggies, olive oil, herbs</p>
      <p><b>Instructions:</b> Cook chickpeas + veggies together on high heat.</p>
      <p><b>Eco Tip:</b> Seasonal veggies = fewer food miles.</p>

      <p class="recipe-tags">ğŸ”¥ 280 Calories â€¢ ğŸŒ 0.25 kg COâ‚‚</p>
      <button class="share-btn" onclick="shareRecipe('Chickpea & Veggie Stir Fry ğŸ¥•')">ğŸ“¤ Share</button>
    </div>
  </div>

  <!-- Recipe 3 -->
  <div class="recipe-card">
    <div class="recipe-title">Overnight Oats with Fruits ğŸ“</div>
    <div class="recipe-details">
      <p><b>Ingredients:</b> Oats, chia seeds, plant milk, fruits</p>
      <p><b>Instructions:</b> Mix & refrigerate overnight. Add fruit next morning.</p>
      <p><b>Eco Tip:</b> Use local fruits to reduce transport carbon.</p>

      <p class="recipe-tags">ğŸ”¥ 240 Calories â€¢ ğŸŒ 0.18 kg COâ‚‚</p>
      <button class="share-btn" onclick="shareRecipe('Overnight Oats with Fruits ğŸ“')">ğŸ“¤ Share</button>
    </div>
  </div>

  <!-- Recipe 4 -->
  <div class="recipe-card">
    <div class="recipe-title">Banana & Almond Energy Bites ğŸŒ</div>
    <div class="recipe-details">
      <p><b>Ingredients:</b> Banana, oats, almond butter</p>
      <p><b>Instructions:</b> Mash â†’ roll â†’ refrigerate.</p>
      <p><b>Eco Tip:</b> Bananas = low-waste, low-carbon energy boost.</p>

      <p class="recipe-tags">ğŸ”¥ 150 Calories â€¢ ğŸŒ 0.12 kg COâ‚‚</p>
      <button class="share-btn" onclick="shareRecipe('Banana & Almond Energy Bites ğŸŒ')">ğŸ“¤ Share</button>
    </div>
  </div>

</section>

<!-- Fancy Sustainability News Section -->
<div id="eco-news" style="background-color:#d0f0c0; padding:10px; overflow:hidden; white-space:nowrap; border-radius:10px; margin:20px 0; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
  <div id="news-items" style="display:inline-block; padding-left:100%; animation:scrollNews 15s linear infinite;">
    <span style="margin-right:50px;">ğŸŒ¿ Global Summit on Renewable Energy: Nations commit to zero-emission targets</span>
    <span style="margin-right:50px;">ğŸŒ± Innovative Plant-Based Foods Reduce Carbon Footprint</span>
    <span style="margin-right:50px;">â™»ï¸ Plastic Waste Recycling Hits Record Levels in Europe</span>
    <span style="margin-right:50px;">ğŸŒ Cities Implement Green Urban Spaces to Combat Pollution</span>
    <a href="https://www.google.com/search?q=sustainability+news" target="_blank" style="margin-left:50px; text-decoration:none; color:green; font-weight:bold;">See More News â†’</a>
  </div>
</div>

<style>
@keyframes scrollNews {
  0% { transform: translateX(0%); }
  100% { transform: translateX(-100%); }
}

#news-items span, #news-items a {
  display: inline-block;
}

/* Pause on hover */
#eco-news:hover #news-items {
  animation-play-state: paused;
}
</style>



<!-- ğŸ™ï¸ ECO PODCAST SECTION -->
<section class="eco-playlist fade-in">
  <h2>ğŸ§ Eco Podcasts â€” Real Conversations, Real Change</h2>
  <p class="subtext">Listen to sustainability-focused podcasts directly on Spotify.</p>

  <div class="playlist-container">

    <div class="playlist-card">
      <h3>ğŸŒ Climate One</h3>
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/show/3mFvlg6bC2fx2rScVeuXLQ"
        width="100%" height="232" frameBorder="0" allow="encrypted-media">
      </iframe>
    </div>

    <div class="playlist-card">
      <h3>ğŸ”„ Sustainability Forward</h3>
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/show/5KolpBiRlNwu8h2IMq7ZOD"
        width="100%" height="232" frameBorder="0" allow="encrypted-media">
      </iframe>
    </div>

    <div class="playlist-card">
      <h3>ğŸ“˜ Sustainability Is</h3>
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/show/21GfReb0ziZh7IGWyyNt4b"
        width="100%" height="232" frameBorder="0" allow="encrypted-media">
      </iframe>
    </div>

    <div class="playlist-card">
      <h3>ğŸ”— The Climate Connection</h3>
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/show/5yLZEo26eww8Fl9TGMlLiq"
        width="100%" height="232" frameBorder="0" allow="encrypted-media">
      </iframe>
    </div>

    <div class="playlist-card">
      <h3>ğŸ’¡ Sustainability Solved</h3>
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/show/5KeDxHojOVO4s6tCxBMMcV"
        width="100%" height="232" frameBorder="0" allow="encrypted-media">
      </iframe>
    </div>

    <div class="playlist-card">
  <h3>ğŸ¢ Business of Sustainability</h3>
  <iframe style="border-radius:12px"
    src="https://open.spotify.com/embed/show/3oGciCLHZBuRUuvSJMxf5N"
    width="100%" height="232" frameBorder="0" allow="encrypted-media">
  </iframe>
</div>


    <div class="playlist-card">
      <h3>ğŸ”§ Sustainability Transformations</h3>
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/show/27buks0Snn5t0TddSzcjEA"
        width="100%" height="232" frameBorder="0" allow="encrypted-media">
      </iframe>
    </div>

    <div class="playlist-card">
      <h3>â• Climate +</h3>
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/show/7vZ3keB0qerEBXIGZfzacq"
        width="100%" height="232" frameBorder="0" allow="encrypted-media">
      </iframe>
    </div>

  </div>
</section>

<!-- FULL MOBILE-OPTIMIZED + GLASS + ANIMATED + SMART SCANNER (FINAL EATCO VERSION) -->
<section id="food-scanner" style="margin-top:40px;padding:20px;">

  <h2 style="font-size:28px;font-weight:800;margin-bottom:10px;">ğŸ§ª Food Impact Scanner</h2>
  <p style="color:#444;font-size:16px;margin-bottom:20px;">Scan or search foods to see carbon, water, land impact, EcoScore, health stars & greener swaps.</p>

  <!-- Search Row -->
  <div style="display:flex;gap:10px;flex-wrap:wrap;">
    <input id="foodInput" type="text" placeholder="Search food (Apple, Rice, etc)" style="padding:14px;flex:1;border-radius:12px;border:1px solid #ccc;font-size:16px;min-width:220px;">
    <button onclick="scanFood()" style="padding:14px 20px;border-radius:12px;background:black;color:white;border:none;font-size:16px;cursor:pointer;">Search</button>
  </div>

  <!-- Camera Button -->
  <button onclick="startCameraScan()" style="margin-top:15px;width:100%;padding:14px;border-radius:12px;border:none;background:#007bff;color:white;font-size:16px;cursor:pointer;">ğŸ“· Scan With Camera</button>

  <!-- Camera View -->
  <video id="cameraView" playsinline style="width:100%;margin-top:15px;border-radius:15px;display:none;"></video>

  <!-- Results -->
  <div id="scannerResult" style="margin-top:25px;padding:20px;border-radius:18px;background:rgba(255,255,255,0.7);backdrop-filter:blur(12px);display:none;"></div>
</section>


  <!-- Footer -->
  <footer>
    <p>Â© 2025 EatCo | Made with ğŸ’š by Inayat Agnihotri</p>
  </footer>

<script>
// ***********************
// ***********************
// ***********************
//  MASSIVE FOOD DATABASE (UPDATED & FINISHED)
// ***********************
const foodData = {
  "apple": {carbon:0.2, water:70, land:0.3, health:5, ecoscore:"A", alt:"Pear, Guava"},
  "banana": {carbon:0.8, water:160, land:0.5, health:4, ecoscore:"B", alt:"Papaya, Apple"},
  "rice": {carbon:4, water:2500, land:2, health:4, ecoscore:"C", alt:"Millets, Quinoa"},
  "milk": {carbon:3, water:1200, land:1.2, health:3, ecoscore:"C", alt:"Oat Milk"},
  "chicken": {carbon:6, water:4300, land:7, health:3, ecoscore:"C", alt:"Eggs, Lentils"},
  "beef": {carbon:27, water:15000, land:22, health:2, ecoscore:"D", alt:"Chicken, Tofu"},
  "potato": {carbon:0.3, water:25, land:0.2, health:5, ecoscore:"A", alt:"Sweet Potato"},
  "bread": {carbon:1, water:160, land:0.8, health:3, ecoscore:"B", alt:"Whole Grain Bread"},
  "tofu": {carbon:2, water:300, land:1.6, health:5, ecoscore:"A", alt:"Paneer (moderate)"},

  // NEW FOODS
  "orange": {carbon:0.5, water:50, land:0.4, health:5, ecoscore:"A", alt:"Apple, Grapes"},
  "tomato": {carbon:0.4, water:20, land:0.2, health:5, ecoscore:"A", alt:"Bell Pepper, Carrot"},
  "lettuce": {carbon:0.2, water:15, land:0.1, health:5, ecoscore:"A", alt:"Spinach, Kale"},
  "eggs": {carbon:4, water:330, land:1.5, health:4, ecoscore:"B", alt:"Tofu, Chickpeas"},
  "cheese": {carbon:9, water:500, land:6, health:3, ecoscore:"C", alt:"Plant-based Cheese, Yogurt"},
  "salmon": {carbon:11, water:4000, land:5, health:4, ecoscore:"C", alt:"Trout, Tofu"},
  "pasta": {carbon:2, water:180, land:0.5, health:4, ecoscore:"B", alt:"Whole Grain Pasta, Quinoa"},
  "almonds": {carbon:2.5, water:4000, land:1, health:5, ecoscore:"B", alt:"Peanuts, Cashews"}
};

// ***********************
// BARCODE MAP (UPDATED)
// ***********************
const barcodeMap = {
  "890111": "banana",
  "890222": "apple",
  "890333": "beef",
  "890444": "rice",
  "890555": "milk",
  "890666": "chicken",
  "890777": "potato",
  "890888": "bread",
  "890999": "tofu",
  "891000": "orange",
  "891111": "tomato",
  "891222": "lettuce",
  "891333": "eggs",
  "891444": "cheese",
  "891555": "salmon",
  "891666": "pasta",
  "891777": "almonds"
};

// ***********************
// SEARCH FUNCTION + ANIMATED BARS
// ***********************
function scanFood(){
  let input=document.getElementById("foodInput").value.toLowerCase().trim();
  let box=document.getElementById("scannerResult");

  if(!foodData[input]){
    box.style.display="block";
    box.innerHTML=`<h3>Food Not Found</h3><p>Try Apple, Rice, Bananaâ€¦</p>`;
    return;
  }

  let f=foodData[input];

  box.style.display="block";
  box.innerHTML=`
    <h3 style="font-size:22px;margin-bottom:10px;text-transform:capitalize;">${input}</h3>

    <p><strong>Health Rating:</strong> â­ ${"â˜…".repeat(f.health)}</p>
    <p><strong>EcoScore:</strong> ${f.ecoscore}</p>

    <div style="margin-top:15px;">
      <p>ğŸŒ Carbon Footprint (${f.carbon} kg COâ‚‚-e)</p>
      <div style="height:10px;background:#ddd;border-radius:10px;overflow:hidden;">
        <div style="width:0%;height:100%;background:#ff5252;transition:1.4s;" class="bar-carbon"></div>
      </div>

      <p style="margin-top:10px;">ğŸ’§ Water Usage (${f.water} L)</p>
      <div style="height:10px;background:#ddd;border-radius:10px;overflow:hidden;">
        <div style="width:0%;height:100%;background:#4ea7ff;transition:1.4s;" class="bar-water"></div>
      </div>

      <p style="margin-top:10px;">ğŸŒ± Land Use (${f.land} mÂ²)</p>
      <div style="height:10px;background:#ddd;border-radius:10px;overflow:hidden;">
        <div style="width:0%;height:100%;background:#00c853;transition:1.4s;" class="bar-land"></div>
      </div>
    </div>

    <h4 style="margin-top:20px;font-size:18px;">ğŸ’¡ Greener Alternatives</h4>
    <p>${f.alt}</p>
  `;

 setTimeout(() => {
  const carbonBar = document.querySelector('.bar-carbon');
  const waterBar = document.querySelector('.bar-water');
  const landBar = document.querySelector('.bar-land');

  // Animate with smooth increment
  let carbonWidth = 0, waterWidth = 0, landWidth = 0;
  const carbonTarget = f.carbon * 3;
  const waterTarget = Math.min(f.water / 200, 100);
  const landTarget = f.land * 4;

  const animate = () => {
    if (carbonWidth < carbonTarget) carbonWidth += 0.5;
    if (waterWidth < waterTarget) waterWidth += 0.5;
    if (landWidth < landTarget) landWidth += 0.5;

    carbonBar.style.width = carbonWidth + "%";
    waterBar.style.width = waterWidth + "%";
    landBar.style.width = landWidth + "%";

    if (carbonWidth < carbonTarget || waterWidth < waterTarget || landWidth < landTarget) {
      requestAnimationFrame(animate);
    }
  };
  animate();
}, 100);


// ************************************
// CAMERA BARCODE SCANNING (MOBILE SAFE WITH QUAGGA)
// ************************************
async function startCameraScan() {
  const video = document.getElementById("cameraView");
  video.style.display = "block";

  if (video.srcObject) {
    video.srcObject.getTracks().forEach(t => t.stop());
  }

  try {
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
    video.srcObject = stream;
    video.play();

    if ("BarcodeDetector" in window) {
      const barcodeDetector = new BarcodeDetector({ formats: ["ean_13", "upc_a", "code_128"] });

      const loop = () => {
        barcodeDetector.detect(video).then(codes => {
          if (codes.length > 0) {
            showBarcodeResult(codes[0].rawValue);
            stream.getTracks().forEach(t => t.stop());
            video.style.display = "none";
          } else {
            requestAnimationFrame(loop);
          }
        }).catch(() => requestAnimationFrame(loop));
      };
      loop();
    } else {
      Quagga.init({
        inputStream: {
          name: "Live",
          type: "LiveStream",
          target: video,
          constraints: { facingMode: "environment" }
        },
        decoder: { readers: ["ean_reader","upc_reader","code_128_reader"] }
      }, function(err) {
        if (err) {
          alert("Camera blocked or unsupported.");
          return;
        }
        Quagga.start();
      });

      Quagga.onDetected(data => {
        showBarcodeResult(data.codeResult.code);
        Quagga.stop();
        stream.getTracks().forEach(t => t.stop());
        video.style.display = "none";
      });
    }
  } catch (err) {
    alert("Camera blocked or unsupported.");
  }
}

// SAMPLE BARCODE MAP (UPDATED WITH NEW FOODS)
const barcodeMap = {
  "890111": "banana",
  "890222": "apple",
  "890333": "beef",
  "890444": "orange",
  "890555": "tomato",
  "890666": "lettuce",
  "890777": "eggs",
  "890888": "cheese",
  "890999": "salmon",
  "891000": "pasta",
  "891111": "almonds"
};

function showBarcodeResult(code){
  const food=barcodeMap[code];
  let box=document.getElementById("scannerResult");

  if(!food){
    box.innerHTML=`<h3>Unknown Barcode</h3><p>Code: ${code}</p>`;
    box.style.display="block";
    return;
  }

  document.getElementById("foodInput").value=food;
  scanFood();
}
</script>

<!-- LOAD QUAGGAJS FOR MOBILE-FRIENDLY SCANNING -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>




</body>
</html>
